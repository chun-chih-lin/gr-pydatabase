import pmt
from gnuradio import gr
import numpy as np

meta = dict()
vector = None

# for idx, col in enumerate(["a", "b", "c"]):
# 	meta[idx] = col



# print(pdu)

meta = {'instantaneous fer': 0.0,
'lost frames': 0.0,
'address 3': 'ff:ff:ff:ff:ff:ff',
'address 2': '23:23:23:23:23:23',
'address 1': '42:42:42:42:42:42',
'sequence number': 4,
'subtype': 'Data',
'type': 'Data',
'duration': 0,
'dlt': 105,
'frame bytes': 45,
'encoding': 0,
'snr': 16.610923334734892,
'nominal frequency': 2472000000.0,
'frequency offset': -7645.875025267676,
'beta': -2.3740475177764893,
'csi': np.array([ 0.00473716-0.00182282j,  0.00517873-0.00228481j,
0.00513217-0.0042307j ,  0.00571684-0.00350592j,
0.00688374-0.00687564j,  0.00720272-0.00471244j,
0.00789335-0.00762472j,  0.00934642-0.00857775j,
0.01233274-0.00823964j,  0.01310595-0.00688986j,
0.01472586-0.00731821j,  0.01788622-0.00929399j,
0.01750917-0.01115404j,  0.01974376-0.01486238j,
0.02095800-0.01628101j,  0.02237085-0.0134679j ,
0.02104325-0.0146789j ,  0.02160103-0.01525838j,
0.01966968-0.01330264j,  0.02595157-0.01263801j,
0.02357413-0.00764474j,  0.02669483-0.0057048j ,
0.02732467-0.00567589j,  0.03152146+0.00134658j,
0.03082833+0.00285313j,  0.03093820+0.0076515j ,
0.03544351+0.01020984j,  0.03876046+0.00988997j,
0.03772106+0.01547532j,  0.03720437+0.01482657j,
0.04064669+0.01471572j,  0.04111224+0.01326515j,
0.04028063+0.01262858j,  0.03885466+0.01505j   ,
0.03806815+0.01084428j,  0.03838895+0.01427674j,
0.03401738+0.01452761j,  0.03158722+0.01368146j,
0.03087005+0.00969274j,  0.02749040+0.01247589j,
0.02254945+0.0075831j ,  0.02153032+0.00918376j,
0.01828430+0.00895377j,  0.01769991+0.00673958j,
0.01487326+0.00559261j,  0.01299281+0.00435471j,
0.01245338+0.00472188j,  0.01077287+0.00497642j,
0.00984350+0.0024762j ,  0.00923334+0.0016375j ,
0.00717704+0.00228807j,  0.00661275+0.00128932j], dtype=np.complex64)}

pdu = pmt.cons(pmt.to_pmt(meta), pmt.to_pmt(None))


if pmt.is_pair(pdu):
	meta = pmt.to_python(pmt.car(pdu))
	data = pmt.cdr(pdu)

	if meta is None:
		meta = dict()

	if pmt.is_u8vector(data):
		data = pmt.u8vector_elements(data)

	print("meta: \n", meta)
	print("data:\n", data)
	pass


# [  8   0   0   0  66  66  66  66  66  66  35  35  35  35  35  35 255 255 255 255 255 255 144   0 115 100 102 117 104  98 101  98 114 113 119 101 51  53  49  54  53]